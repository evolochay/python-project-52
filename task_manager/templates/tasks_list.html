{% extends 'base.html' %}
{% load bootstrap4 %}
{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}
{% bootstrap_javascript jquery='full' %}
{% bootstrap_css %}


{% block content %}
<style>
  .nav-link {
      display: block;
      padding: .5rem 1rem;

  }
  h2 {
      display: block;
      padding: .5rem 1rem;
  }
  .form-control {
    
  }
</style>

<div class="mb-3 text-left">
  <h2>{% translate "Tasks" %}</h2>
</div>

<a class="nav-link" href="{% url 'task_create' %}">{% translate "Create task" %}</a>

<div class="card mb-3">
  <div class="card-body bg-light">
    <form class="form-inline center" method="get">
      <div class="form-group">
        <label for="id_status">{% translate "Status" %}</label>
        <div class="ml-2 mr-3">
          {{ filter.form.status }}
        </div>
      </div>
      <div class="form-group">
        <label for="id_executor">{% translate "Executor" %}</label>
        <div class="ml-2 mr-3">
          {{ filter.form.executor }}
        </div>
      </div>
      <div class="form-group">
        <label for="id_label">{% translate "Label" %}</label>
        <div class="ml-2 mr-3">
          {{ filter.form.labels }}
        </div>
      </div>
      <div class="form-group">
        <div class="mr-3">
          <div class="form-check">
            {{ filter.form.self_task }}
            <label class="form-check-label" for="{{ filter.form.self_task.id_for_label }}">
            {% translate 'My tasks only' %}
            </label>
          </div>
        </div>
      </div>      
      <div class="row">
        <div class="col-md-4 mb-3">
          {{ filter.form.label.label }}
          {{ filter.form.label }}
        </div>
        <div class="col-auto mx-auto"><br>
          <button class="btn btn-primary" type="submit">{% translate "Show" %}</button>
        </div>
      </div>
    </form>
  </div>
</div>


<table class="table table-striped border">
    <thead>
      <tr>
        <th>{% translate "ID" %}</th>
        <th>{% translate "Name" %}</th>
        <th>{% translate "Status" %}</th>
        <th>{% translate "Author" %}</th>
        <th>{% translate "Executor" %}</th>
        <th>{% translate "Created date" %}</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for task in tasks %}
        <tr>
          <td>{{ task.id }}</td>
          <td><a href="{% url 'task_show' task.pk %}">{{ task.name }}</a></td>
          <td>{{ task.status}}</td>
          <td>{{ task.author}}</td>
          <td>{{ task.executor}}</td>
          <td>{{ task.time_create|date:'d.m.Y' }}</td>
          <td>
              <a href="{% url 'task_update' task.pk %}">{% translate "Update" %}</a>
              <br>
              <a href="{% url 'task_delete' task.pk %}">{% translate "Delete" %}</a>
          </td>
        </tr>
      {% endfor %}
    </tbody>
</table>

{% endblock %}